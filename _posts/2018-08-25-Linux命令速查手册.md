---
layout: post
title: Linux 命令速查手册
date: 2018-08-25 00:12:11
tags:
- linux
categories: linux
description: 总结一些常用的Linux命令
---

### Linux系统版本

```shell
lsb_release -a 

No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 14.04.1 LTS
Release:        14.04
Codename:       trusty
```

### 建立软连接

```shell
ln -sf /opt/exploit-database/searchsploit /usr/local/bin/searchsploit
将b指向a（前者）
-s 软连接  -f 强制
```

### 当前用户所属群组

Linux id命令用于显示用户的ID，以及所属群组的ID。 提权成功

```shell
uid=0(root) gid=0(root) groups=0(root)
```

### 查找命令

```shell
# 查找根目录下所有名字含有flag的全部文件和目录
find / -name *flag*  # 请别使用 find / -name flag 只能发现名字为flag的
# 发现根目录下最近{t}分钟被访问过的文件
find / -type f -amin -{t}
# 查找根目录下所有www-data用户的可写文件
find / -user www-data -writable
```
### 如何快速修改文件

```shell
sed -i 's/原字符串/新字符串/' /home/1.txt # 只替换每行第一个
sed -i 's/原字符串/新字符串/g' /home/1.txt # 替换全部
```

### 彩虹雨

```shell
yes "$(seq 231 -1 16)" | while read i; do printf "\x1b[48;5;${i}m\n"; sleep .02; done
```

### xargs作用

比较：

```shell
echo '--help' | cat # 输出 --help 字符串
echo '--help' | xargs cat # 输出 cat 帮助
```

### echo -e的作用

```
root@Debian8:/var/spool/cron# echo "\n\n"
\n\n
root@Debian8:/var/spool/cron# echo -e "\n\n"



root@Debian8:/var/spool/cron# 
```

### 定时任务文件

Linux 有二个定时文件存放地：

```
/etc/crontab 及 /var/spool/cron/$USER 中定义定时任务
```
二者区别：

- /etc/crontab 只有 root 用户可以使用，使用时需 root 权限，而且**必须指定运行用户**，才会执行，例如：

  ```shell
  # 分   时   天   月  周 
  25 6	* * *	root	test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )
  ```

- /var/spool/cron/$USER 所有用户都可以使用，可以使用 `crontab -u username -e` 命令来直接编辑这个文件 

删除定时任务，注意直接执行该命令是删除当前用户的定时任务，普通用户无法删除其他用户的定时任务

```shell
crontab -r
```

服务重启命令

```shell
/etc/init.d/crond restart
service crond restart
```

### awk 行处理命令

**awk是行处理器**: 相比较屏幕处理的优点，在处理庞大文件时不会出现内存溢出或是处理缓慢的问题，通常用来格式化文本信息

**awk处理过程:** 依次对每一行进行处理，然后输出

### 查看本机开放的端口

```shell
netstat -lpnut # 查看的好像都是 LISTEN 状态的
```

### grep 的用法

```shell
grep -i pattern files   //不区分大小写地搜索。默认情况区分大小写，
grep -w pattern files  //只匹配整个单词，而不是字符串的一部分（如匹配'magic'，而不是'magical'）
grep -E pattern files // pattern是一个正则表达式
```

因此如果我想要列出所有的bash sh文件启动的进程，可以执行命令

```shell
ps -ef | grep -E -w 'bash|sh'
# saferman   1263   1044  0 10:23 tty1     00:00:40 /usr/bin/gnome-shell 这样的的进程不会显示出来，最终显示结果如下
saferman   2668   2657  0 10:28 pts/0    00:00:00 bash
saferman   3789   2657  0 12:51 pts/1    00:00:00 bash
saferman   3834   3789  0 12:59 pts/1    00:00:00 sh -i
saferman   3900   2668  0 13:04 pts/0    00:00:00 grep --color=auto -E -w bash|sh
```

